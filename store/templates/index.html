{% extends 'base.html' %}

{% block content %}

{% load cart %}
{% load custom_filter %}
<!-- body -->
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css'>
<link rel='stylesheet' href='https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css'>
<div class="container-fluid mt-3">
	<div class="row">


		<!-- filter -->

		<div class="col-lg-3 mx-auto" ">
			<div class="list-group" >

				<a href="/" class="list-group-item list-group-item-action" style="font-weight: bold;font-family: 'Poppins', sans-serif; ">All Products</a>
<!--temp-->
				{% for category in categories %}
				<a href="/?category={{category.id}}"
					class="list-group-item list-group-item-action" style="font-weight: bold;font-family: 'Poppins', sans-serif; ">{{category.name}}</a>
				{% endfor %}
			</div>
		</div>

		<!-- all products -->
		<div id='products' class="col-lg-9 mx-auto">
			<div class="row mx-auto">
				{% for product in products %}
				<div class="card mx-auto mb-3" id={{product.id}} style="width: 18rem;">
						<img class="card-img-top" src="{{product.image.url}}" alt="Card image cap">
			
					<!--card-img-top-->
						<!--Zoom over hover effect-->
					<style>
						.card-img-top{
							transition: transform .2s;
						}
						.card-img-top:hover {
						  transform: scale(1.10); /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */
						}
						</style>
						

					<div class="card-body">
						<p class="card-title" style="font-weight: bold;font-family: 'Poppins', sans-serif; ">{{product.name}}<br>
							<span class="badge badge-primary"><!--changehereforcolors-->{{product.category}}</span>&nbsp;
							{% if product.bestsellerstatus %}
							<span class="badge badge-warning">Best Seller</span>&nbsp;
							{%else%}
							<!---->
							{%endif%}
						</p> 
						<p class="card-text" style="font-family: 'Poppins', sans-serif; font-weight: 200;">{{product.description}}<br>
						<i data-star="{{product.rating}}"></i> <br>
						<style>
							
							[data-star] {
							text-align:left;
							font-style:normal;
							display:inline-block;
							position: relative;
							unicode-bidi: bidi-override;
							font-size: 3.5ex;
							}
							[data-star]::before { 
								padding-top: 0%;
							/*display:block;*/
							content: '★★★★★';
							color: #ddd;
							size: 20ex;
							}
							[data-star]::after {
							white-space:nowrap;
							position:absolute;
							top:0;
							left:0;
							content: '★★★★★';
							width: 0;
							color: orange;
							overflow:hidden;
							height:150%;
							}

							[data-star^="0.1"]::after,[data-star^=".1"]::after{width:2%}
							[data-star^="0.2"]::after,[data-star^=".2"]::after{width:4%}
							[data-star^="0.3"]::after,[data-star^=".3"]::after{width:6%}
							[data-star^="0.4"]::after,[data-star^=".4"]::after{width:8%}
							[data-star^="0.5"]::after,[data-star^=".5"]::after{width:10%}
							[data-star^="0.6"]::after,[data-star^=".6"]::after{width:12%}
							[data-star^="0.7"]::after,[data-star^=".7"]::after{width:14%}
							[data-star^="0.8"]::after,[data-star^=".8"]::after{width:16%}
							[data-star^="0.9"]::after,[data-star^=".9"]::after{width:18%}
							[data-star^="1"]::after{width:20%}
							[data-star^="1.1"]::after{width:22%}
							[data-star^="1.2"]::after{width:24%}
							[data-star^="1.3"]::after{width:26%}
							[data-star^="1.4"]::after{width:28%}
							[data-star^="1.5"]::after{width:30%}
							[data-star^="1.6"]::after{width:32%}
							[data-star^="1.7"]::after{width:34%}
							[data-star^="1.8"]::after{width:36%}
							[data-star^="1.9"]::after{width:38%}
							[data-star^="2"]::after{width:40%}
							[data-star^="2.1"]::after{width:42%}
							[data-star^="2.2"]::after{width:44%}
							[data-star^="2.3"]::after{width:46%}
							[data-star^="2.4"]::after{width:48%}
							[data-star^="2.5"]::after{width:50%}
							[data-star^="2.6"]::after{width:52%}
							[data-star^="2.7"]::after{width:54%}
							[data-star^="2.8"]::after{width:56%}
							[data-star^="2.9"]::after{width:58%}
							[data-star^="3"]::after{width:60%}
							[data-star^="3.1"]::after{width:62%}
							[data-star^="3.2"]::after{width:64%}
							[data-star^="3.3"]::after{width:66%}
							[data-star^="3.4"]::after{width:68%}
							[data-star^="3.5"]::after{width:70%}
							[data-star^="3.6"]::after{width:72%}
							[data-star^="3.7"]::after{width:74%}
							[data-star^="3.8"]::after{width:76%}
							[data-star^="3.9"]::after{width:78%}
							[data-star^="4"]::after{width:80%}
							[data-star^="4.1"]::after{width:82%}
							[data-star^="4.2"]::after{width:84%}
							[data-star^="4.3"]::after{width:86%}
							[data-star^="4.4"]::after{width:88%}
							[data-star^="4.5"]::after{width:90%}
							[data-star^="4.6"]::after{width:92%}
							[data-star^="4.7"]::after{width:94%}
							[data-star^="4.8"]::after{width:96%}
							[data-star^="4.9"]::after{width:98%}
							[data-star^="5"]::after{width:100%}
						</style>
						</p>
						{% if product.discount50 %}
						<p class="card-title" style="font-weight: bold;font-family: 'Poppins', sans-serif; ">
						<span class="original-price" aria-label="Original Price">{{product.price|currency}}</span>
						&nbsp;&nbsp;
						<span aria-label="Sale Price">{{product|discount50_price:request.session.cart|currency}}</span>
						<span class="badge badge-success">50% OFF</span>
						<style>
							.original-price {
								position: relative;
								color: #555;
								}
								.original-price::after {
								content: "";
								position: absolute;
								top: 50%;
								left: 0;
								right: 0;
								border-top: 3px solid red;
								transform: rotate(-30deg);
								}
						</style>
						</p>
						{% elif product.discount30 %} 
						<p class="card-title" style="font-weight: bold;font-family: 'Poppins', sans-serif; ">
							<span class="original-price" aria-label="Original Price">{{product.price|currency}}</span>
							&nbsp;&nbsp;
							<span aria-label="Sale Price">{{product|discount30_price:request.session.cart|currency}}</span>
							<span class="badge badge-success">30% OFF</span>
							<style>
								.original-price {
									position: relative;
									color: #555;
									}
									.original-price::after {
									content: "";
									position: absolute;
									top: 50%;
									left: 0;
									right: 0;
									border-top: 3px solid red;
									transform: rotate(-30deg);
									}
							</style>
							</p>
							{% elif product.discount10 %} 
							<p class="card-title" style="font-weight: bold;font-family: 'Poppins', sans-serif; ">
								<span class="original-price" aria-label="Original Price">{{product.price|currency}}</span>
								&nbsp;&nbsp;
								<span aria-label="Sale Price">{{product|discount10_price:request.session.cart|currency}}</span>
								<span class="badge badge-success">10% OFF</span>
								<style>
									.original-price {
										position: relative;
										color: #555;
										}
										.original-price::after {
										content: "";
										position: absolute;
										top: 50%;
										left: 0;
										right: 0;
										border-top: 3px solid red;
										transform: rotate(-30deg);
										}
								</style>
								</p>
						{%else%}
						<p class="card-title" style="font-weight: bold;font-family: 'Poppins', sans-serif; ">
						<b>{{product.price|currency}}</b>
						</p>
                    	{% endif %}
					
	
					</div>

					<div class="card-footer p-0 no-gutters">

						{% if product|is_in_cart:request.session.cart %}
						<div class="row no-gutters">
							<form action="/#{{product.id}}" class="col-2 " method="post">
								{% csrf_token %}
								<input hidden type="text" name='product' value='{{product.id}}'>
								<input hidden type="text" name='remove' value='True'>
								<input type="submit" value=" - " class="btn btn-block btn-light border-right" style="font-weight: bold;font-family: 'Poppins', sans-serif; background-color: rgb(253, 85, 85);">
							</form>
							<div class="text-center col" style="font-weight: bold;font-family: 'Poppins', sans-serif; ">{{product|cart_quantity:request.session.cart}} in Cart</div>
							<form action="/#{{product.id}}" class="col-2 " method="post">
								{% csrf_token %}
								<input hidden type="text" name='product' value='{{product.id}}'>
								<input type="submit" value=" + " class="btn btn-block btn-light border-left" style="font-weight: bold;font-family: 'Poppins', sans-serif; background-color: rgb(47, 255, 82);">
							</form>
						</div>
						{% else %}
						<form action="/#{{product.id}}" method="POST" class="btn-block">
							{% csrf_token %}
							<input hidden type="text" name='product' value='{{product.id}}'>
							<input type="submit" class="float-right btn btn-light  form-control" style="font-weight: bold;font-family: 'Poppins', sans-serif; "
								value="Add To Cart">
						</form>
						{% endif %}

					</div>

				</div>
				{% endfor %}
			</div>
		</div>
	</div>
</div>



{% endblock %}